/**
 * Article CSS
 * -----------------------------------------------------------------------------
 * @category   Sass Template
 * @package    Tuairisc.ie
 * @author     Mark Grealish <mark@bhalash.com>
 * @copyright  Copyright (c) 2014-2015, Tuairisc Bheo Teo
 * @license    All Rights Reserved
 * @version    2.0
 * @link       https://github.com/bhalash/tuairisc.ie
 */

$article-vspace: $vspace * 1.3;

article {
    overflow: hidden;
}

/**
 * General Post Text Styles
 * -----------------------------------------------------------------------------
 */

.attribution {
    @extend %green-link;
    display: inline-block;

    @include media(smartphone) {
        display: block;
        @include margin(0.3, top);
    }

    a {
        font-weight: bold;
    }
}

img.cover-fit {
    /* For fallback IE polyfill.
     * All images for polyfill (mostly post thumbnails) will have explicit
     * dimensions set. */
    object-fit: cover;
    width: 100%;
}

.thumbnail, .photo {
    @extend %grey-border;
}

.thumbnail {
    /* Chrome treats it as display: inline-block and adds invisible font
     * space below the div. */
    font-size: 0;
    // Trim children can have absolute positions.
    position: relative;
    width: 100%;
}

.title a:hover {
    @extend %green-link;
}

.post-excerpt, figcaption {
    color: palette(white, dark);
}

.post-excerpt {
    @extend %small;
}

a.post-edit-link {
    @extend %green-link;

    &:hover {
        text-decoration: underline;
    }
}

figure.wp-caption {
    // Bug with size in Chrome. Margin is applied evenly.
    margin: 0 !important;
}

.post-date {
    @extend %small;
    // Stops colour changing when I hover on parent link.
    color: palette(white, x-dark) !important;
}

/**
 * Post Header
 * -----------------------------------------------------------------------------
 */

header {
    .author-meta {
        @include flex-parent(row);
    }

    .photo {
        @include flex-child(1);
        @include height(5);
        @include margin($vspace, right);
        @include rem(max-width, 5);
    }

    .author-info {
        @include flex-child(1);
    }

    .author-link a {
        font-weight: bold;
    }
}

/**
 * Post Footer
 * -----------------------------------------------------------------------------
 */

footer {
    // @include margin(1 0);
}

/**
 * Full Articles
 * -----------------------------------------------------------------------------
 */

article.full {
    header {
        @extend %title-underline;
        @include margin($vspace, bottom);
    }

    .title {
        @include margin($vspace 0);
    }

    .post-excerpt {
        @include margin($vspace, bottom);
    }

    .post-content {
        @include clearfix();
        @include margin($vspace * 2 0);

        p, ul, ol, blockquote, iframe, figcaption {
            @include margin($article-vspace, bottom);
        }

        a {
            @extend %green-link;

            &:hover {
                text-decoration: underline;
            }
        }
        
        p, li, blockquote {
            @include line-height(2);
        }

        figcaption {
            @extend %small;
            @include padding($vspace * 0.5, top);
        }

        .alignright {
            float: right;
            @include padding($vspace, left);
        }

        .alignleft {
            float: left;
            @include padding($vspace, right);
        }
    }
}

/**
 * Lead, Normal and Small Archive Templates
 * -----------------------------------------------------------------------------
 * Featured: Used at the head of each category index, and the head of home page.
 * Small: Used below the featured on the home page.
 * Archive: Used on all category and other archive pages.
 */

article[class^=archive] {
    header {
        @include margin($vspace * 0.5, bottom);
    }
}

article.archive-lead {
    // Lead article.
    > a >:last-child {
        @include margin($vspace * 0.5 0);
    }

    .thumbnail img {
        @include height(38.5);
    }
}

article.archive-small {
    // Sub-article, front page. 
    .thumbnail img {
        @include height(12.5);
    }

    a >:first-child {
        @include margin($vspace * 0.5, bottom);
    }
}

article.archive {
    // "Regular" archive, used on all archive pages.

    .title {
        font-weight: bold;
    }

    .thumbnail img {
        @include height(17);
    }

    > a {
        // Hyperlink wraps the content.
        @include flex-parent(row, space-between);

        > div {
            @include flex-child(0 1 49%);
        }
    }

    p {
        /* This is strictly to prevent the paragraph from lighting up on link
         * hover. The entire article's interior is wrapped in a single 
         * hyperlink. I only want the title to light up on hover. */
        color: black !important;
    }
}

/**
 * Sidebar Article Template
 * -----------------------------------------------------------------------------
 * This is used in sidebar widget articles.
 */

article.sidebar {
    @include margin($vspace, bottom);

    > a {
        @include flex-parent(row);
    }

    .thumbnail {
        @include flex-child(0 1 25%);
        @include height(4.5);

        img {
            height: inherit;
        }
    }

    header {
        box-sizing: border-box;
        @include flex-child(1);
        @include padding(1, left);
    }
}

/**
 * Single Post Related Articles
 * -----------------------------------------------------------------------------
 */

.related-articles-wrapper {
    @include media(portrait) {
        @include margin($vspace * 2, bottom);
    }

    @include media(print) {
        display: none;
    }
}

.related-articles {
    @include column-of(article, 3, 2);

    .title, .thumbnail {
        @include margin($vspace * 0.5, bottom);
    }

    .thumbnail {
        @include height(16.7);
        width: 100%;

        img {
            height: inherit;
        }
    }
}
